@inherits DotNetNuke.Web.Mvc.Framework.DnnWebViewPage<IEnumerable<Upendo.Modules.UpendoUserManaged.Models.DnnModel.Users>>

@using System.Text.RegularExpressions
@using DotNetNuke.Web.Mvc.Helpers

<div id="Items-@Dnn.ModuleContext.ModuleId" style="margin: 2%!important;">
    <div class="col-md-12">
        <div class="col-md-4">
            <img alt="logo" src="DesktopModules/MVC/Upendo.Modules.UpendoUserManaged/Images/Upendo-logo-trans.png" />
        </div>
        <div class="col-md-8">
            <h1 id="title">Upendo User Manage</h1>
            <h6 id="subtitle">Module for user management in DNN</h6>
        </div>
    </div>

    @if (Model == null)
    {
        <p>@Dnn.LocalizeString("NoItems")</p>
    }
    else
    {
        <hr />
        <div class="pb10">
            <a type="button" class="btn btn-primary left" href="@Url.Action("Create", "UserManage", new {ctl = "Edit"})">
                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Create User
            </a>
            <ul class='nav'>
                <li>
                    <div class="btn-group dropup right">
                        <a class="btn btn-danger dropdown-toggle" style="color: white;" data-toggle="dropdown" href="#">
                            Options
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu ">
                            <li>
                                <a href="@Url.Action("DeleteUnauthorizedUsers", "UserManage", new {})">
                                    <span class="glyphicon glyphicon-minus" aria-hidden="true"></span> Delete Unauthorized Users
                                </a>
                            </li>
                            <li>
                                <a href="@Url.Action("DeleteUnauthorizedUsers", "UserManage", new {})">
                                    <span class="glyphicon glyphicon-minus" aria-hidden="true"></span> Remove Delete Users
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
            </ul>
        </div>

        <table class="table dynamic table-striped table-bordered table-hover" id="table">
            <thead>
                <tr style="background-color:#6d5a2c; color:#FFFFFF">
                    <th class="hidden">Id</th>
                    <th>USERNAME</th>
                    <th>NAME</th>
                    <th>EMAIL</th>
                    <th>SUPERUSER</th>
                    <th>STATE</th>
                    <th>ACTIONS</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td class="hidden">
                            @item.UserId
                        </td>
                        <td>
                            @item.Username
                        </td>
                        <td>
                            @item.DisplayName
                        </td>
                        <td>
                            @item.Email
                        </td>
                        <td class="text-center">
                            @if (@item.IsSuperUser == true)
                            {
                                <span class="glyphicon glyphicon-ok" aria-hidden="true" style="color:yellowgreen"></span>
                            }
                            else
                            {
                                <span class="glyphicon glyphicon-remove" aria-hidden="true" style="color:red"></span>

                            }

                        </td>
                        <td>
                        </td>
                        <td class="text-right">
                            <a data-hint="Details" class="btn btn-info btn-sm edit hint--top hint--info" href="@Url.Action("Details", "UserManage", new {ctl = "Edit", itemId = item.UserId})">
                                <span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span>
                            </a>
                            <a data-hint="Edit" class="btn btn-warning btn-sm edit hint--top hint--warning" href="@Url.Action("Edit", "UserManage", new {ctl = "Edit", itemId = item.UserId})">
                                <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
                            </a>
                            <a data-hint="Reset Password" class="btn btn-default btn-sm edit hint--top hint--" href="@Url.Action("ChangePassword", "UserManage", new {ctl = "Edit", itemId = item.UserId})">
                                <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span>
                            </a>
                            <a data-hint="Delete" class="btn btn-danger btn-sm delete hint--top hint--error" data-placement="top" data-singleton="true" href="@Url.Action("Delete", "UserManage", new {itemId = item.UserId})">
                                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }
</div>

<script>
  $(document).ready(function () {
        $('#dataTables-pages').DataTable();
    });
    @* let app = new Vue({
        el: '#app',
        data: {

        },
        methods:{
            addEdit(){
                this.dialog = true;
            },
            getUsers(){
                $.ajax({
                    url: '/Users/GetUsers',
                    type: "GET",
                    success: function(response){
                            console.log(response)
                        }
                }).done(function(){
                    alert('DONE!!');
                });
            },
            save(){
                $.ajax({
                    url: "/Users/Create",
                    data: this.dataModel,
                    type: "POST"
                }).done(function(){
                    alert('DONE!!');
                });
            }
        }
    }) *@
</script>